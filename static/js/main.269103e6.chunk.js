(this.webpackJsonpapka=this.webpackJsonpapka||[]).push([[0],[,,,,,,,,,function(t,e,a){t.exports={propertyText:"Property_propertyText__24cRR",Small:"Property_Small__1Z7Jw",Big:"Property_Big__3sydg",Area:"Property_Area__2mApM",AreaClicked:"Property_AreaClicked__38QwJ"}},,,,function(t,e,a){t.exports={playerCircle:"Circle_playerCircle__2x0bE",fillInCircle:"Circle_fillInCircle__2ADkV",background:"Circle_background__36SHH",svgArrow:"Circle_svgArrow__tAKVl"}},function(t,e,a){t.exports={cardE:"CardE_cardE__1tXlV",Buttons:"CardE_Buttons__2mY6v"}},function(t,e,a){t.exports={playerCircleActive:"Player_playerCircleActive__2cqwd",playerCircle:"Player_playerCircle__s3jbo"}},function(t,e,a){t.exports={card:"Controls_card__2MqR6",buttons:"Controls_buttons__bcp8b"}},,,,function(t,e,a){},,,function(t,e,a){t.exports=a(28)},,,,,function(t,e,a){"use strict";a.r(e);var s=a(0),i=a.n(s),n=a(19),r=a.n(n),l=a(2),c=a(3),o=a(6),h=a(5),d=a(4),u=a(11),m=a(9),v=a.n(m);function y(t,e,a,s){var i=(s-90)*Math.PI/180;return{x:t+a*Math.cos(i),y:e+a*Math.sin(i)}}var k=function(t){Object(h.a)(a,t);var e=Object(d.a)(a);function a(t){var s;return Object(l.a)(this,a),(s=e.call(this,t)).test=0,s.state={background:"gray",cx:1e3,cy:410,num:t.num,max:t.max,sq1:{},sq2:{},sq3:{},sq4:{},sq5:{},field:{},label:{},level:4,ownerColor:"#fff4b8",groupColor:"orange",fontColor:"black",text:{},data:t.data,type:"property",clickArea:{},callback:t.callback,clicked:t.clicked},s}return Object(c.a)(a,[{key:"drawSquare",value:function(t,e,a,s){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"green",n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,r=arguments.length>6?arguments[6]:void 0,l=arguments.length>7?arguments[7]:void 0,c={};return c.id="house_"+r+"_"+l,c.x=t,c.y=e,c.height=a,c.width=s,c.fill=i,c.transform="rotate("+n+","+this.state.cx+","+this.state.cy+")",c}},{key:"drawPath",value:function(t,e,a){var s={};return s.id=e+this.state.num,s.stroke="#446688",s.width=20,s.d=function(t,e,a,s,i){var n=y(t,e,a,i),r=y(t,e,a,s),l=i-s<=180?"0":"1";return["M",n.x,n.y,"A",a,a,0,l,0,r.x,r.y,"L",t,e,"L",n.x,n.y].join(" ")}(this.state.cx,this.state.cy,t,360/this.state.max*(this.state.num-.5),360/this.state.max*(this.state.num+.5)),s}},{key:"drawText",value:function(t,e,a){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i={};return i.id="txt"+this.state.num,i.x=t,i.y=e,i.txt=a,i.transform="rotate("+s+","+this.state.cx+","+this.state.cy+")",i}},{key:"componentDidMount",value:function(){var t,e,a,s=this.drawSquare(982.5,50,15,15,"blue",360/this.state.max*this.state.num,this.state.num,1),i=this.drawSquare(1002.5,50,15,15,"blue",360/this.state.max*this.state.num,this.state.num,2),n=this.drawSquare(982.5,70,15,15,"blue",360/this.state.max*this.state.num,this.state.num,3),r=this.drawSquare(1002.5,70,15,15,"blue",360/this.state.max*this.state.num,this.state.num,4),l=this.drawSquare(985,50,30,30,"red",360/this.state.max*this.state.num,this.state.num,5);"property"===this.state.type?(t=this.drawPath(400,"field"),e=this.drawPath(410,"label")):t=this.drawPath(410,"field"),a=this.drawPath(410,"area");var c=this.drawText(1e3,23,"Waszyngton",360/this.state.max*this.state.num);this.setState({sq1:s,sq2:i,sq3:n,sq4:r,sq5:l,field:t,label:e,text:c,clickArea:a}),this.state.data&&this.setState(Object(u.a)({},this.state.data))}},{key:"render",value:function(){var t=this,e=[];if("property"===this.state.type){e.push(i.a.createElement("path",{key:"lab"+this.state.label.id,id:this.state.label.id,fill:this.state.groupColor,stroke:this.state.label.stroke,width:this.state.label.width,d:this.state.label.d}));var a=[];5===this.state.level?a.push(i.a.createElement("rect",{key:this.state.sq5.id+"5",id:this.state.sq5.id,x:this.state.sq5.x,y:this.state.sq5.y,height:this.state.sq5.height,width:this.state.sq5.width,fill:this.state.sq5.fill,transform:this.state.sq5.transform,className:v.a.Big})):(this.state.level>=1&&a.push(i.a.createElement("rect",{key:this.state.sq1.id+"1",id:this.state.sq2.id,x:this.state.sq2.x,y:this.state.sq2.y,height:this.state.sq2.height,width:this.state.sq2.width,fill:this.state.sq2.fill,transform:this.state.sq2.transform,className:v.a.Small})),this.state.level>=2&&a.push(i.a.createElement("rect",{key:this.state.sq2.id+"2",id:this.state.sq1.id,x:this.state.sq1.x,y:this.state.sq1.y,height:this.state.sq1.height,width:this.state.sq1.width,fill:this.state.sq1.fill,transform:this.state.sq1.transform,className:v.a.Small})),this.state.level>=3&&a.push(i.a.createElement("rect",{key:this.state.sq3.id+"3",id:this.state.sq3.id,x:this.state.sq3.x,y:this.state.sq3.y,height:this.state.sq3.height,width:this.state.sq3.width,fill:this.state.sq3.fill,transform:this.state.sq3.transform,className:v.a.Small})),this.state.level>=4&&a.push(i.a.createElement("rect",{key:this.state.sq4.id+"4",id:this.state.sq4.id,x:this.state.sq4.x,y:this.state.sq4.y,height:this.state.sq4.height,width:this.state.sq4.width,fill:this.state.sq4.fill,transform:this.state.sq4.transform,className:v.a.Small})))}e.push(i.a.createElement("path",{key:"field"+this.state.label.id,id:this.state.field.id,fill:this.state.ownerColor,stroke:this.state.field.stroke,width:this.state.field.width,d:this.state.field.d})),e.push(i.a.createElement("text",{key:"txt"+this.state.label.id,id:this.state.text.id,x:this.state.text.x,y:this.state.text.y,className:v.a.propertyText,transform:this.state.text.transform},this.state.text.txt));var s=i.a.createElement("path",{key:"area"+this.state.clickArea.id,className:this.state.clicked?v.a.AreaClicked:v.a.Area,id:this.state.clickArea.id,onClick:function(){return t.state.callback(t.state.num)},d:this.state.clickArea.d});return i.a.createElement("g",null,e,a,s)}}],[{key:"getDerivedStateFromProps",value:function(t,e){return 1===t.clicked&&console.log("AA"),Object(u.a)({},t)}}]),a}(i.a.Component),p=a(15),f=a.n(p),b=a(30),w=function(t){Object(h.a)(a,t);var e=Object(d.a)(a);function a(t){var s;return Object(l.a)(this,a),(s=e.call(this,t)).state={cx2:t.cx,cy2:t.cy,level:t.level,r:t.r,color:t.color,pos:t.pos,max:t.max,y:0,angle:0,loaded:0,active:0,style:{},newstyle:{},empty:{}},s.myElement=null,s.myTween=null,s.setProps=s.setProps.bind(Object(o.a)(s)),s}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var t=this;this.setState({y:this.state.cy2-275+2.3*this.state.r*this.state.level,angle:this.state.pos/this.state.max*360},(function(){var e=t.state.cy2-t.state.y,a=Math.sin(t.state.angle*Math.PI/180)*e+t.state.cx2,s=-Math.cos(t.state.angle*Math.PI/180)*e+t.state.cy2,i={fill:t.state.color,cx:a,cy:s,r:t.state.r};t.setState({newstyle:i,style:i,loaded:1})}))}},{key:"setProps",value:function(){var t={fill:this.state.color,cx:this.state.newstyle.cx,cy:this.state.newstyle.cy,r:this.state.r};this.setState({style:t})}},{key:"componentDidUpdate",value:function(){this.state.loaded&&(this.state.style.cx===this.state.newstyle.cx&&this.state.style.cy===this.state.newstyle.cy||(this.myTween=b.a.fromTo(this.myElement,1,{cx:this.state.style.cx,cy:this.state.style.cy},{cx:this.state.newstyle.cx,cy:this.state.newstyle.cy,onComplete:this.setProps})))}},{key:"render",value:function(){var t=this,e=this.state.active?f.a.playerCircleActive:f.a.playerCircle;return i.a.createElement("circle",{ref:function(e){return t.myElement=e},style:this.state.style,className:e})}}],[{key:"getDerivedStateFromProps",value:function(t,e){if(1===e.loaded&&(e.pos!==t.pos||e.level!==t.level)&&t.r){var a=e.cy2-275+2.3*e.r*t.level,s=e.cy2-a,i=t.pos/e.max*360;return{newstyle:{cx:Math.sin(i*Math.PI/180)*s+e.cx2,cy:-Math.cos(i*Math.PI/180)*s+e.cy2},pos:t.pos,level:t.level}}return{}}}]),a}(i.a.Component),x=a(13),g=a.n(x),q=function(t){Object(h.a)(a,t);var e=Object(d.a)(a);function a(t){var s;return Object(l.a)(this,a),(s=e.call(this,t)).colors=["blue","red","pink","yellow"],s.test=0,s.state={background:"gray",cx2:1e3,cy2:410,test:0,circle:{},number:30,pnum:4,pPos:[0,2,2,0],h:t.h/957*820,w:Math.min(820,t.w),data:t.data,clicked:-1,callback:t.callback},s.interval=s.interval.bind(Object(o.a)(s)),s.intervalTime=1500,s.callback=s.callback.bind(Object(o.a)(s)),s}return Object(c.a)(a,[{key:"callback",value:function(t){this.state.callback(t),this.setState({clicked:t})}},{key:"drawCircle",value:function(t){var e={};return e.r=t,e.stroke="black",e}},{key:"componentDidMount",value:function(){document.body.style.backgroundColor=this.state.background;var t=this.drawCircle(300);this.setState({circle:t});var e=setInterval(this.interval,this.intervalTime);this.setState({interval:e})}},{key:"interval",value:function(){}},{key:"render",value:function(){for(var t=[],e=[],a=0;a<this.state.number;a++)t.push(i.a.createElement(k,{key:"Prop"+a,max:this.state.number,clicked:this.state.clicked===a?1:0,num:a,data:this.state.data[a],callback:this.callback}));for(var s=0;s<4;s++){for(var n=0,r=this.state.pPos[s],l=0;l<s;l++)r===this.state.pPos[l]&&n++;e.push(i.a.createElement(w,{cx:this.state.cx2,cy:this.state.cy2,color:this.colors[s],r:15,key:"Cir"+s,level:n,pos:r,max:this.state.number}))}return i.a.createElement("div",{className:g.a.svgArrow},i.a.createElement("svg",{id:"canvas",height:this.state.h,width:this.state.w,viewBox:"590 0 820 820",preserveAspectRatio:"xMaxYMid meet"},i.a.createElement("rect",{id:"background",className:g.a.background}),t,i.a.createElement("circle",{fill:this.state.background,cx:this.state.cx2,cy:this.state.cy2,r:this.state.circle.r,className:g.a.fillInCircle}),e))}}],[{key:"getDerivedStateFromProps",value:function(t,e){return{h:t.h/957*820,w:Math.min(820,t.w)}}}]),a}(i.a.Component),E=a(20),C=a.n(E),_=a(22);var O=function(t){Object(h.a)(a,t);var e=Object(d.a)(a);function a(t){var s;return Object(l.a)(this,a),(s=e.call(this,t)).command=JSON.stringify({player:1,command:"refresh",value:1}),s.state={disabled:t.disabled,variant:t.variant,text:t.text,command:t.command,size:t.size||"lg",block:"sm"===t.size,value:t.value},s.ws=t.ws,s.handleClick=s.handleClick.bind(Object(o.a)(s)),s}return Object(c.a)(a,[{key:"sendRequest",value:function(){return new Promise((function(t){return setTimeout(t,2e3)}))}},{key:"handleClick",value:function(){var t,e,a,s=(t=1,e=this.state.command,a=this.props.value,{player:t,command:e,value:a});this.ws?this.ws.send(s):console.log(s),this.setState({disabled:!0})}},{key:"componentDidUpdate",value:function(){var t=this;this.state.disabled&&this.sendRequest().then((function(){return t.setState({disabled:!1})}))}},{key:"render",value:function(){return i.a.createElement(_.a,{variant:this.state.variant,disabled:this.state.disabled,type:"button",size:this.state.size,onClick:this.state.disabled?null:this.handleClick,block:!0},this.state.text)}}],[{key:"getDerivedStateFromProps",value:function(t,e){return Object(u.a)({},t.disabled)}}]),a}(i.a.Component),j=a(12),S=(a(18),a(14)),P=a.n(S),A=function(t){Object(h.a)(a,t);var e=Object(d.a)(a);function a(t){var s;return Object(l.a)(this,a),(s=e.call(this,t)).state={name:t.name||"NAZWA",fee:t.fee||100,cost:t.cost||200,status:t.status||2,level:t.level||4,moved:t.moved,clicked:t.clicked},s}return Object(c.a)(a,[{key:"render",value:function(){var t=[];1===this.state.status?t.push(i.a.createElement(O,{key:"buy",text:"BUY",command:"buy",value:this.state.clicked,variant:"success",size:"sm"})):2===this.state.status&&(t.push(i.a.createElement(O,{key:"sell",text:"SELL",command:"sell",variant:"danger",value:this.state.clicked,size:"sm"})),this.state.level>0&&t.push(i.a.createElement(O,{key:"downgrade",text:"DOWNGRADE",command:"downgrade",value:this.state.clicked,variant:"warning",size:"sm"})),this.state.level<5&&t.push(i.a.createElement(O,{key:"upgrade",text:"UPGRADE",command:"upgrade",value:this.state.clicked,variant:"success",size:"sm"})));var e="Current fee: ".concat(this.state.fee,"$\n");return 1===this.state.status&&(e+="Buy cost: ".concat(this.state.cost,"$")),2===this.state.status&&(e+="Upgrade cost: ".concat(this.state.cost,"$")),i.a.createElement("div",{className:this.state.moved?P.a.cardEMoved:P.a.cardE},i.a.createElement("div",{className:P.a.Buttons},i.a.createElement(j.a,{bg:"light",style:{width:"12rem"}},i.a.createElement(j.a.Body,null,i.a.createElement(j.a.Title,null,this.state.clicked,i.a.createElement("br",null),this.state.name),i.a.createElement(j.a.Text,null,e),t))))}}],[{key:"getDerivedStateFromProps",value:function(t,e){return Object(u.a)({},t)}}]),a}(i.a.Component),M=a(16),D=a.n(M),N=function(t){Object(h.a)(a,t);var e=Object(d.a)(a);function a(t){var s;return Object(l.a)(this,a),(s=e.call(this,t)).colors=["primary","secondary","success","warning","danger","info","dark","light"],s.state={variant:1,clicked:t.clicked},s.ws=t.ws,s}return Object(c.a)(a,[{key:"render",value:function(){return i.a.createElement("div",{className:D.a.buttons},i.a.createElement(O,{variant:this.colors[0],text:"Roll the dice",ws:this.ws,command:"roll"}),i.a.createElement(O,{variant:this.colors[4],text:"End turn",ws:this.ws,command:"end"}),i.a.createElement("div",{className:D.a.card},i.a.createElement("br",null),i.a.createElement(A,{clicked:this.props.clicked})))}}]),a}(i.a.Component),T=function(t){Object(h.a)(a,t);var e=Object(d.a)(a);function a(t){var s;return Object(l.a)(this,a),(s=e.call(this,t)).ws=new WebSocket("ws:\\\\".concat("localhost",":").concat("8000")),s.state={gameData:[{type:"property",level:5},{ownerColor:"pink"},{groupColor:"red"}],h:window.innerHeight,w:window.innerWidth,active:!1,clicked:0},s.updateDimensions=s.updateDimensions.bind(Object(o.a)(s)),s.callback=s.callback.bind(Object(o.a)(s)),s}return Object(c.a)(a,[{key:"updateDimensions",value:function(){this.setState({h:window.innerHeight,w:window.innerWidth})}},{key:"componentDidMount",value:function(){var t=this;window.addEventListener("resize",this.updateDimensions),this.ws.onopen=function(){console.log("Connected to websocket"),t.setState({active:!0})},this.ws.onmessage=function(e){try{var a=JSON.parse(e.data);t.onMessage(a)}catch(s){console.log(e.data)}},this.ws.onclose=function(){t.setState({active:!1}),console.log("disconnected")},this.ws.onerror=function(t){console.error("Socket encountered error: ",t.message,"Closing socket")}}},{key:"onMessage",value:function(t){console.log(t)}},{key:"callback",value:function(t){this.setState({clicked:t})}},{key:"render",value:function(){return i.a.createElement("div",{className:C.a.App},i.a.createElement(q,{data:this.state.gameData,h:this.state.h,w:this.state.w,callback:this.callback}),i.a.createElement(N,{ws:this.state.active?this.ws:null,clicked:this.state.clicked}))}}]),a}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(T,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}],[[23,1,2]]]);
//# sourceMappingURL=main.269103e6.chunk.js.map